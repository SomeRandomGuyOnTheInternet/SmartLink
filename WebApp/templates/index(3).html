<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Switch Control</title>
    <script src="../static/js/jquery-3.7.1.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#find-remote-btn').click(function() {
                var currentState = $(this).data('state');
                var newState = currentState === 'ON' ? 'OFF' : 'ON';
                $.ajax({
                    url: '/find_remote',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({"state": newState}),
                    success: function(response) {
                        $('#find-remote-btn').text('Switch is ' + response.state);
                        $('#find-remote-btn').data('state', response.state);
                    }
                });
            });
            
			$('#learn-command-btn').click(function() {
                var currentState = $(this).data('state');
                var newState = currentState === 'ON' ? 'OFF' : 'ON';
                $.ajax({
                    url: '/learn_command',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({"state": newState}),
                    success: function(response) {
                        $('#learn-command-btn').text('Switch is ' + response.state);
                        $('#learn-command-btn').data('state', response.state);
                    }
                });
            });
            
			$('#send-command-btn').click(function() {
                var currentState = $(this).data('state');
                var newState = currentState === 'ON' ? 'OFF' : 'ON';
                $.ajax({
                    url: '/send_command',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({"command": "2600ec006d390d0f0d2b0d0f0d0f0c100e0e0d0f0d0f0d0f0c100c100d0f0d0f0d2b0c100c0f0e0e0e0f0d0f0c100c0f0d0f0d100d2b0d0e0d0f0e0f0d2b0d0e0d0f0d2c0c100c0f0d0f0e0e0d100c0f0c100e0e0e0e0d2b0c100d2b0d2b0c2c0d2c0b100d0f0c2c0d0e0d2c0d0f0d2a0d2c0c2c0d2b0d0009606e390d0f0d2b0c100d0f0d0f0d0f0c100c100d0f0d0f0d0f0c100d0f0c2c0c100d0f0d0f0d0f0d0f0c0f0d100d0f0c100d2a0e0f0c100c100d2a0e0f0c100c2b0e0e0e0f0c100c100b100d0f0d0f0d100c100b2c0d0f0d2b0c2c0e2b0b2c0c100e0e0d2b0c100c2c0d0f0c2c0c2c0d2b0c2c0c000d05"}),
                    success: function(response) {
                        $('#learn-command-btn').text('Switch is ' + response.state);
                        $('#learn-command-btn').data('state', response.state);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <button id="find-remote-btn" data-state="OFF">Find remote</button>
    <button id="learn-command-btn" data-state="OFF">Learn command</button>
    <button id="send-command-btn" data-state="OFF">Send command</button>
</body>
</html>
